{
{% for setting in _irods_cfg_advanced_settings | dict2items | selectattr("value") %}
{%   if loop.first %}
  "advanced_settings": {
{%   endif %}
    "{{ setting.key }}": {{ setting.value }}{% if not loop.last %},
{%                                             else %}
  },
{%                                             endif %}
{% endfor %}
  "default_dir_mode": "{{ _irods_cfg_default_dir_mode }}",
  "default_file_mode": "{{ _irods_cfg_default_file_mode }}",
  "default_hash_scheme": "{{ _irods_cfg_default_hash_scheme }}",
{% if _irods_cfg_default_resource_directory %}
  "default_resource_directory": "{{ _irods_cfg_default_resource_directory }}",
{% endif %}
{% if _irods_cfg_default_resource_name %}
  "default_resource_name": "{{ _irods_cfg_default_resource_name }}",
{% endif %}
  "environment_variables": {
{% for key, value in _irods_cfg_environment_variables.iteritems() %}
    "{{ key }}": "{{ value }}"{% if not loop.last %},
{% endif %}
{% endfor %}
  },
  "federation": [
{% for federate in _irods_cfg_federation %}
    {
      "icat_host": "{{ federate.icat_host }}",
      "zone_name": "{{ federate.zone_name }}",
      "zone_key": "{{ federate.zone_key }}",
      "negotiation_key": "{{ federate.negotiation_key }}"
    }{% if not loop.last %},{% endif %}
{% endfor %}
  ],
  "icat_host": "{{ _irods_cfg_icat_host }}",
{% if _irods_cfg_kerberos_name %}
  "kerberos_name": "{{ _irods_cfg_kerberos_name }}",
{% endif %}
  "match_hash_policy": "{{ _irods_cfg_match_hash_policy }}",
  "negotiation_key": "{{ _irods_cfg_negotiation_key }}",
{% if _irods_cfg_pam_no_extend %}
  "pam_no_extend": {{ _irods_cfg_pam_no_extend }},
{% endif %}
{% if _irods_cfg_pam_password_length %}
  "pam_password_length": {{ _irods_cfg_pam_password_length }},
{% endif %}
{% if _irods_cfg_pam_password_max_time %}
  "pam_password_max_time": {{ _irods_cfg_pam_password_max_time }},
{% endif %}
{% if _irods_cfg_pam_password_min_time %}
  "pam_password_min_time": {{ _irods_cfg_pam_password_min_time }},
{% endif %}
  "re_data_variable_mapping_set": [
{% for mapping in _irods_cfg_re_additional_data_variable_mappings %}
    { "filename": "{{ mapping }}" },
{% endfor %}
    { "filename": "core" }
  ],
  "re_function_name_mapping_set": [
{% for mapping in _irods_cfg_re_additional_function_name_mappings %}
    { "filename": "{{ mapping }}" },
{% endfor %}
    { "filename": "core" }
  ],
  "re_rulebase_set": [
{% for rulebase in _irods_cfg_re_additional_rulebases %}
    { "filename": "{{ rulebase }}" },
{% endfor %}
    { "filename": "core" }
  ],
  "schema_validation_base_uri": "{{ _irods_cfg_schema_validation_base_uri }}",
  "server_control_plane_encryption_algorithm": "{{
    _irods_cfg_server_control_plane_encryption_algorithm }}",
  "server_control_plane_encryption_num_hash_rounds": {{
    _irods_cfg_server_control_plane_encryption_num_hash_rounds }},
  "server_control_plane_key": "{{ _irods_cfg_server_control_plane_key }}",
  "server_control_plane_port": {{ _irods_cfg_server_control_plane_port }},
  "server_control_plane_timeout_milliseconds": {{ _irods_cfg_server_control_plane_timeout }},
  "server_port_range_end": {{ _irods_cfg_server_port_range_end }},
  "server_port_range_start": {{ _irods_cfg_server_port_range_start }},
{% if _irods_cfg_xmsg_port %}
  "xmsg_port": {{ _irods_cfg_xmsg_port }},
{% endif %}
  "zone_auth_scheme": "{{ _irods_cfg_zone_auth_scheme }}",
  "zone_key": "{{ _irods_cfg_zone_key }}",
  "zone_name": "{{ _irods_cfg_zone_name }}",
  "zone_port": {{ _irods_cfg_zone_port }},
  "zone_user": "{{ _irods_cfg_zone_user }}"
}
