---
- name: validate address type for hosts_config
  with_items: "{{ _irods_cfg_host_entries }}"
  assert:
    that:
      - item.address_type == 'local' or item.address_type == 'remote'
  ignore_errors: true

- name: generate hosts_config.json
  template:
    src: hosts_config.json.j2
    dest: /etc/irods/hosts_config.json
    owner: "{{ _irods_cfg_service_account_name }}"
    group: "{{ _irods_cfg_service_group_name }}"
  notify:
    - changed config

- meta: flush_handlers
